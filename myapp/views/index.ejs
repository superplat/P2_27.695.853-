<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="csrf-token" content="<%= csrfToken %>">

  <!-- Metadatos para redes sociales -->
  <meta property="og:title" content="<%= metaTags.title %>" />
  <meta property="og:description" content="<%= metaTags.description %>" />
  <meta property="og:image" content="<%= metaTags.image %>" />
  <meta property="og:url" content="<%= metaTags.url %>" />
  <meta property="og:type" content="<%= metaTags.type %>" />

  <meta name="twitter:card" content="<%= metaTags.twitterCard %>" />
  <meta name="twitter:site" content="<%= metaTags.twitterSite %>" />
  <meta name="twitter:title" content="<%= metaTags.title %>" />
  <meta name="twitter:description" content="<%= metaTags.description %>" />
  <meta name="twitter:image" content="<%= metaTags.image %>" />
  
  <title><%= metaTags.title %></title> <!-- Usamos el t칤tulo de los metadatos -->

  <link rel="stylesheet" href="/stylesheets/style.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://www.google.com/recaptcha/api.js" async defer></script> <!-- Incluye reCAPTCHA -->

  <script>
    const baseURL = '<%= baseURL %>'; // Aqu칤 se usa la variable baseURL
    const recaptchaSiteKey = '<%= recaptchaSiteKey %>'; // Aqu칤 se usa la variable recaptchaSiteKey
    console.log(baseURL); // Para verificar que se est치 pasando correctamente
    console.log(recaptchaSiteKey); // Para verificar que se est치 pasando correctamente
  </script>


  <!-- Inclusi칩n de jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


 <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-M7LRJFBSVK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M7LRJFBSVK');
</script>

  <!-- Google reCAPTCHA v3 -->
  <script src="https://www.google.com/recaptcha/api.js?render=6LcnyLQqAAAAAMdRFos5Rjwo2Ncdv6Vf5A4MnMyv"></script>

  <!-- Google Maps API -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBja4QjyiOF3tljEpNjt9sN97tIjW1PM4E&callback=initMap" async defer></script>

</head>
<body>
  <header>
    <h1>Alquiler de Equipos para Eventos</h1>
  </header>

  <main>
    <!-- Secci칩n de Equipos -->
    <section class="equipos">
      <h2>Alquila tus equipos ahora y Benef칤ciate</h2>
      <p>- Equipos profesionales para todo tipo de eventos</p>
      <p>- Alquilar es una prueba antes de comprar</p>
      <p>- Evita el coste de mantenimiento y servicio t칠cnico</p>
      <p>- No es necesario invertir mucho para alquilar el equipo audiovisual</p>

      <!-- Ejemplo de productos -->
      <div class="equipo">
        <img src="/images/sonido.jpg" alt="Equipo de Sonido">
        <h3>Equipo de Sonido</h3>
        <p>Equipo de sonido profesionales para todo tipo de eventos.</p>
        <button class="add-to-cart" data-product="Sonido" data-price="150">A침adir al carrito</button>
      </div>

  <!-- video beam-->
  <div class="equipo">
    <img src="/images/proyector.jpg" alt="Proyector">
    <h3>Proyector</h3>
    <p>Proyectores para presentaciones y conferencias.</p>
    <button class="add-to-cart" data-product="Proyector" data-price="100">A침adir al carrito</button>
  </div>

  <!-- Luces -->
  <div class="equipo">
    <img src="/images/luces.jpg" alt="Luces para Eventos">
    <h3>Luces para Eventos</h3>
    <p>Iluminaci칩n profesional para todo tipo de eventos.</p>
    <button class="add-to-cart" data-product="Luces" data-price="120">A침adir al carrito</button>
  </div>

  <!-- pantalla -->
  <div class="equipo">
    <img src="/images/pantalla-led.jpg" alt="Pantalla LED">
    <h3>Pantalla LED</h3>
    <p>Pantallas LED de alta resoluci칩n para presentaciones o conciertos.</p>
    <button class="add-to-cart" data-product="Pantalla LED" data-price="200">A침adir al carrito</button>
  </div>

  <!-- camara -->
  <div class="equipo">
    <img src="/images/camara-profesional.jpg" alt="C치mara Profesional">
    <h3>C치mara Profesional</h3>
    <p>Camaras de alta definici칩n para grabaci칩n de eventos.</p>
    <button class="add-to-cart" data-product="C치mara Profesional" data-price="300">A침adir al carrito</button>
  </div>

  <!-- micro -->
  <div class="equipo">
    <img src="/images/microfono-inalambrico.jpg" alt="Micr칩fono Inal치mbrico">
    <h3>Micr칩fono Inal치mbrico</h3>
    <p>Micr칩fonos inal치mbricos de alta calidad para conferencias y eventos.</p>
    <button class="add-to-cart" data-product="Micr칩fono Inal치mbrico" data-price="50">A침adir al carrito</button>
  </div>

  <!-- mesas y silla -->
  <div class="equipo">
    <img src="/images/mesas.jpg" alt="Mesas y Sillas">
    <h3>Mesas y Sillas</h3>
    <p>Mesas y Sillas para auditorios y salas grandes.</p>
    <button class="add-to-cart" data-product="Mesas y Sillas" data-price="180">A침adir al carrito</button>
  </div>

  <!-- tarima -->
  <div class="equipo">
    <img src="/images/tarima.jpg" alt="Tarima y Escenario">
    <h3>Tarima y Escenario</h3>
    <p>Tarima y escenario para eventos al aire libre o interiores.</p>
    <button class="add-to-cart" data-product="Tarima y Escenario" data-price="250">A침adir al carrito</button>
  </div>






    </section>

    <!-- Google Maps -->
    <section id="map">
      <h2>Ubicaci칩n de nuestro servicio</h2>
      <p>Vis칤tanos en nuestra oficina o cont치ctanos en l칤nea para obtener m치s informaci칩n.</p>
      <div id="google-map" style="width: 100%; height: 400px;"></div>
    </section>

 

  <!-- Contacto -->
  <section id="contact">
    <h2>Contacto</h2>
    <p>Si tienes alguna pregunta o deseas obtener m치s informaci칩n, no dudes en contactarnos mediante el siguiente formulario.</p>

    <form id="contactForm" action="/contactos/add" method="post">
      <!-- Token CSRF -->
      <input type="hidden" name="_csrf" value="<%= csrfToken %>">
      
      <label for="email">Correo Electr칩nico:</label>
      <input type="email" id="email" name="email" placeholder="Tu correo electr칩nico" required>
      
      <label for="nombre">Nombre:</label>
      <input type="text" id="nombre" name="nombre" placeholder="Tu nombre completo" required>
      
      <label for="comentario">Comentario:</label>
      <textarea id="comentario" name="comentario" placeholder="Escribe tu comentario aqu칤..." rows="4" required></textarea>

      <!-- Bot칩n de env칤o -->
      <button type="submit">Enviar</button>
    </form>
  </section>

  <footer>
    <p>&copy; 2024 Created by Hector Arevalo</p>
  </footer>

  <!-- Script para manejar el formulario con Axios y reCAPTCHA v3 -->
  <script>
   document.getElementById('contactForm').addEventListener('submit', function (event) {
  event.preventDefault(); // Prevenir el env칤o tradicional del formulario

  // Obtener el token CSRF
  const csrfToken = document.querySelector('input[name="_csrf"]').value;

  // Ejecutar reCAPTCHA v3
  grecaptcha.ready(function () {
    grecaptcha.execute('6LcnyLQqAAAAAMdRFos5Rjwo2Ncdv6Vf5A4MnMyv', { action: 'submit' }).then(function (token) {
      // Obtener datos del formulario como un objeto JSON
      const formData = {
        nombre: document.getElementById('nombre').value,
        email: document.getElementById('email').value,
        comentario: document.getElementById('comentario').value,
        'g-recaptcha-response': token // Agregar el token de reCAPTCHA
      };

      // 游댌 Verificar los datos antes de enviarlos
      console.log('Datos del formulario:', formData);

      // Rastrear evento de Google Analytics antes de enviar el formulario
      gtag('event', 'submit', {
        'event_category': 'Formulario de contacto',
        'event_label': 'Bot칩n Enviar',
        'value': 1
      });

      
 // Enviar datos del formulario usando Axios
axios.post(`${baseURL}/contactos/add`, formData, {
  headers: {
    'Content-Type': 'application/json', // Especificar el tipo de contenido
    'X-CSRF-Token': csrfToken // Incluir el token CSRF
  }
})
.then(response => {
  if (response.data.success) {
    Swal.fire('칄xito', 'Datos enviados correctamente', 'success');
    window.location.href = `${baseURL}/success`; // Redirigir a la p치gina de 칠xito
  } else {
    Swal.fire('Error', response.data.message || 'Error al enviar el formulario', 'error');
  }
})
.catch(error => {
  if (error.response) {
    // El servidor respondi칩 con un c칩digo de estado fuera del rango 2xx
    Swal.fire('Error', error.response.data.message || 'Error al enviar el formulario', 'error');
  } else if (error.request) {
    // La solicitud fue hecha pero no se recibi칩 respuesta
    Swal.fire('Error', 'No se recibi칩 respuesta del servidor', 'error');
  } else {
    // Algo m치s caus칩 el error
    Swal.fire('Error', error.message || 'Error desconocido', 'error');
  }
  console.error('Error:', error);
});

    });
  });
});
  </script>

</body>
</html>

<!-- Script para Google Maps -->
<script>
  function initMap() {
    const location = { lat: 10.4806, lng: -66.9036 }; // Coordenadas (ejemplo: Caracas, Venezuela)
    const map = new google.maps.Map(document.getElementById('google-map'), {
      zoom: 15,
      center: location,
    });
    const marker = new google.maps.Marker({
      position: location,
      map: map,
      title: "Nuestra Ubicaci칩n",
    });
  }

  window.initMap = initMap;
</script>
</body>
</html>